<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="OVERVIEW In order to enable game creators to build rich, large-scale multiplayer experiences where hundreds or even thousands of players can play together in new and dynamic virtual worlds, DDS is designed to be a networking module built for scale built to handle low-latency, high-volume, high-throughput data replication. It runs multiplayer networking as a separate server-side process, scaling to hundreds of millions of interactions a second – enabling thousands of players to join a single virtual world with increased levels of simulated content."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="DDS™: A Server Gameplay Module for Open-world MMO Games • Kevin A."><meta property="og:description" content="OVERVIEW In order to enable game creators to build rich, large-scale multiplayer experiences where hundreds or even thousands of players can play together in new and dynamic virtual worlds, DDS is designed to be a networking module built for scale built to handle low-latency, high-volume, high-throughput data replication. It runs multiplayer networking as a separate server-side process, scaling to hundreds of millions of interactions a second – enabling thousands of players to join a single virtual world with increased levels of simulated content."><meta property="og:url" content="https://kevinan9.github.io/posts/2023-01-12-dds/"><meta property="og:site_name" content="Kev's 9th blog"><meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/01a2b69d50418a5f151cc2fb6cafa15a?s=256"><meta property="article:author" content="https://facebook.com/kevinan"><meta property="article:section" content="posts"><meta property="article:tag" content="Seamless"><meta property="article:tag" content="MMO"><meta property="article:tag" content="BigWorld"><meta property="article:tag" content="UE5"><meta property="article:published_time" content="2023-01-12T00:00:00Z"><meta property="article:modified_time" content="2023-01-12T00:00:00Z"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@kevinan"><meta name=generator content="Hugo 0.110.0"><title>DDS™: A Server Gameplay Module for Open-world MMO Games • Kevin A.</title><link rel=canonical href=https://kevinan9.github.io/posts/2023-01-12-dds/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style></head><body class='page type-posts has-sidebar'><div class=site><div id=sidebar class=sidebar><a class=screen-reader-text href=#main-menu>Skip to Main Menu</a><div class=container><section class='widget widget-about sep-after'><header><div class=logo><a href=/><img src=/images/logo.png></a></div><h2 class='title site-title'><a href=/>Kev's 9th blog</a></h2><div class=desc>Coding my life!</div></header></section><section class='widget widget-sidebar_menu sep-after'><nav id=sidebar-menu class='menu sidebar-menu' aria-label='Sidebar Menu'><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/posts/>Posts</a></li><li class=item><a href=/about/about>About</a></li></ul></div></nav></section><section class='widget widget-taxonomy_cloud sep-after'><header><h4 class='title widget-title'>tags</h4></header><div class='container list-container'><ul class='list taxonomy-cloud'><li><a href=/tags/algorithm/ style=font-size:1em>Algorithm</a></li><li><a href=/tags/bigworld/ style=font-size:1em>BigWorld</a></li><li><a href=/tags/bio/ style=font-size:2em>bio</a></li><li><a href=/tags/devops/ style=font-size:1em>DevOps</a></li><li><a href=/tags/drawing/ style=font-size:1.5em>Drawing</a></li><li><a href=/tags/goals/ style=font-size:1em>goals</a></li><li><a href=/tags/life/ style=font-size:1em>life</a></li><li><a href=/tags/mmo/ style=font-size:1em>MMO</a></li><li><a href=/tags/motivations/ style=font-size:1em>motivations</a></li><li><a href=/tags/practicing/ style=font-size:1.5em>Practicing</a></li><li><a href=/tags/seamless/ style=font-size:1em>Seamless</a></li><li><a href=/tags/self/ style=font-size:2em>self</a></li><li><a href=/tags/sketch/ style=font-size:1.5em>Sketch</a></li><li><a href=/tags/sketching/ style=font-size:1.5em>Sketching</a></li><li><a href=/tags/ue5/ style=font-size:1em>UE5</a></li></ul></div></section></div><div class=sidebar-overlay></div></div><div class=main><nav id=main-menu class='menu main-menu' aria-label='Main Menu'><div class=container><a class=screen-reader-text href=#content>Skip to Content</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></span><span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></button><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/posts/>Posts</a></li><li class=item><a href=/about/about>About</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class='widget widget-breadcrumbs sep-after'><nav id=breadcrumbs><ol><li><a href=/>Kev's 9th blog</a></li><li><a href=/posts/>Posts</a></li><li><span>DDS™: A Server Gameplay Module for Open-world MMO Games</span></li></ol></nav></section></div></div><header id=header class='header site-header'><div class='container sep-after'><div class=header-info><p class='site-title title'>Kev's 9th blog</p><p class='desc site-desc'>Coding my life!</p></div></div></header><main id=content><article lang=en class=entry><header class='header entry-header'><div class='container sep-after'><div class=header-info><h1 class=title>DDS™: A Server Gameplay Module for Open-world MMO Games</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2023-01-12T00:00:00Z>Jan 12, 2023</time></span>
<span class=byline><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M21 21V20c0-2.76-4-5-9-5s-9 2.24-9 5v1"/><path d="M16 6.37A4 4 0 1112.63 3 4 4 0 0116 6.37z"/></svg><span class=screen-reader-text>by </span><a href=/authors/kevinan9>Kevin A.</a></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>3 mins read</span></div></div></header><div class='container entry-content'><h2 id=overview>OVERVIEW</h2><p>In order to enable game creators to build rich, large-scale multiplayer experiences where hundreds or even thousands of players can play together in new and dynamic virtual worlds, DDS is designed to be a networking module built for scale built to handle low-latency, high-volume, high-throughput data replication. It runs multiplayer networking as a separate server-side process, scaling to hundreds of millions of interactions a second – enabling thousands of players to join a single virtual world with increased levels of simulated content.</p><h2 id=goals>GOALS</h2><ul><li>Dealing with players’ interactions across multi dedicated servers</li></ul><h2 id=specifications>SPECIFICATIONS</h2><ol><li>Communication between servers</li></ol><p>For the server, in order to achieve this technical goal, it is necessary to physically cut the game world, adopt distributed architecture, split the Game World into different map blocks, and hand over to different server processes to carry, and then realize the player transfer between these processes (map cells) through some technical means so that the player does not feel that his data is transferred between these processes Migration process.</p><p><img src=https://lh6.googleusercontent.com/LRFzESBUDbiKfJT44dWqTPthL2FnqWE4v9hETuFcjAbcciip-IrXajgivZVi06v4OGg0wX_vXE6gWBmlE75FsotcM67ACT2yf-NmTJa9en0XF7Rgk2ZPKb0gWEGUSMR36T60u4hgHeu--1hy4nIOt2TekLf1aHW-bdAw6OKwA--wtqJ8WJkEJgX31ehifg alt></p><ol start=2><li>Real-Ghost mechanism</li></ol><p>In order to fit with the later goal, we chose to do the migration on a Real/Ghost basis on this side. The core steps are:</p><ol><li><p>trigger the migration process of role A from DS1 to DS2 based on moving boundaries or other behaviors.</p></li><li><p>A on DS1 switches its role to ROLE_ServerSimulatedProxy and sends migration instructions to DS2</p></li><li><p>A on DS1 synchronizes itself to DS2 by means of attribute synchronization, and sets its role on DS2 to ROLE_Authority at the time of synchronization.</p></li><li><p>DS2 determines that the migration is complete and informs DS1, which takes A offline for processing.</p></li><li><p>The client connects to DS2 and continues the behavior.</p></li></ol><p><img src=https://lh6.googleusercontent.com/6122X4PWqzvEQrOMBd41DXVIgpwcRqpgDlLHeo1KhaGjn0CBbZ_7xc6XAyuwGvTBmeW57xWM9CCjOSz0cy6ZTy9gdvuH3HavGKNNdwTHZ_4SCa11yNoCfDGJNNDLX4WbaudrCsJock9OEVF6_17FEYe5peVzObMruAjfm-qu7vhOLSxI7QoEwNcyanbxOg alt></p><ol start=3><li>RPC-based cross-server interactive</li></ol><p><img src=https://lh3.googleusercontent.com/MSQGilgbc0UsJTdF0kt3PlvZfnYCZ-zCu1eyKYNgTzFQbjpLqYIQr2hPCh1wZCggkAfuvxzMK5qBM_yp5sLFCGq0EUnM-zBvJWSCl39tInwooe3OVHkeBrFd2adgNjHG1wYe10ay9WLdPF39xZN1ymtepA6eu1zo7udZzFctjF1mVDV9Qu8pSE075zqt1A alt></p><p>As shown above is a traditional interactive process for FPS game developers, our goal is to adapt it to get along with our multi-dedicated server model.</p><pre tabindex=0><code>float ADistributedDSDemoCharacter::TakeDamage(...)  
{  
if (Health &lt;= 0.f)  
{  
return  0.f;  
}  
const  float ActualDamage = Super::TakeDamage(Damage, DamageEvent, EventInstigator, DamageCauser);  
if (ActualDamage &gt; 0.f)  
{  
/// 关键路径 ///  
Health -= ActualDamage;  
if (Health &lt;= 0)  
...
</code></pre><p>When an RPC call is initiated on the Server side (e.g. DS1), if the target Actor is a Ghost, the RPC is not executed locally, but is sent to DS2 where the Actor (Real) is located.</p><p>If the Actor happens to be in the &ldquo;migrating&rdquo; state on DS2, the RPC will not be executed locally, but will be sent to DS3, the migration target.</p><p>If the Actor is still &ldquo;non-Real&rdquo; on DS3, an error is reported!</p><p>Similar to &ldquo;RPC redirection&rdquo;, we also have a concept of RPC propagation, to describe the Server side of the Real Actor received from the client RPC request, if the Real Actor found the existence of Ghost Actor (1 or more), then the local execution of RPC At the same time, the RPC sequence is sent to the DS where all Ghost Actors are located for execution.</p><p>The subsequent process is different from &ldquo;RPC redirection&rdquo; in that it does not redirect to Real again, because the RPC source is different.</p><p>After wh have this:</p><p><img src=https://lh5.googleusercontent.com/v7W6qgNqAulUooTxEiIDJzu9-a_i5IZA3jrJXEzvYiZgW7TOQ-pokYLCQZbP2lklg8qSOeOimO4ItTvFN_953d9FWx28vwVoh_uDthLbvjMFuMxYJnK3CjInyYj9LvWAkBlPCGZKvOJgUzFegFz2V3P3tKEhLx0t0vlyPEd7U1gMAeVUTAnIODNTt0F0wA alt></p></div><footer class=entry-footer><div class='container sep-before'><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/seamless/>Seamless</a>, <a class=tag href=/tags/mmo/>MMO</a>, <a class=tag href=/tags/bigworld/>BigWorld</a>, <a class=tag href=/tags/ue5/>UE5</a></div></div></footer></article><nav class=entry-nav><div class=container><div class='prev-entry sep-before'><a href=/posts/2022-12-12-spinnaker/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Deploying Spinnaker in A Kubernetes Cluster</a></div><div class='next-entry sep-before'><a href=/posts/2023-02-14-happy-valentines-day-my-love/><span class=screen-reader-text>Next post: </span>Happy Valentine's Day, My Love<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav><section id=comments class=comments><div class='container sep-before'><div class=comments-area><script src=https://utteranc.es/client.js repo=kevinan9/kevinan9.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></section></main><footer id=footer class=footer><div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'><ul><li><a href=https://github.com/kevinan9 target=_blank rel='noopener me'><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://linkedin.com/in/yupu-an-0765781 target=_blank rel='noopener me'><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>© 2014-2023 Kevin A.</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script></body></html>